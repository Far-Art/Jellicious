<section>
    <h2 mat-dialog-title>סל קניות</h2>
    <mat-dialog-content>
        @if (getTotalAmount() > 0) {
            <table mat-table [dataSource]="dataSource">
                <ng-container matColumnDef="select">
                    <th mat-header-cell *matHeaderCellDef>
                        <mat-checkbox (click)="$event.stopPropagation()"
                                      (change)="toggleAllRows()"
                                      [checked]="isAllSelected()"
                                      [indeterminate]="selection.hasValue() && !isAllSelected()"
                                      [aria-label]="checkboxLabel()">
                        </mat-checkbox>
                    </th>
                    <td mat-cell *matCellDef="let row">
                        <mat-checkbox (click)="$event.stopPropagation()"
                                      (change)="selection.toggle(row.product.id)"
                                      [checked]="selection.isSelected(row.product.id)"
                                      [aria-label]="checkboxLabel(row)">
                        </mat-checkbox>
                    </td>
                    <td mat-footer-cell *matFooterCellDef>סה"כ</td>
                </ng-container>

                <ng-container matColumnDef="img">
                    <th mat-header-cell *matHeaderCellDef></th>
                    <td mat-cell *matCellDef="let row">
                        <img width="60" height="60" [ngSrc]="row.product.imageUrl" alt="תמונה של מוצר">
                    </td>
                    <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>

                <ng-container matColumnDef="name">
                    <th mat-header-cell *matHeaderCellDef>שם</th>
                    <td mat-cell *matCellDef="let row">{{ row.product.name }}</td>
                    <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>

                <ng-container matColumnDef="amount">
                    <th mat-header-cell *matHeaderCellDef>כמות</th>
                    <td mat-cell *matCellDef="let row"> {{ row.amount }}</td>
                    <td mat-footer-cell *matFooterCellDef>{{ getTotalAmount() }}</td>
                </ng-container>

                <ng-container matColumnDef="price">
                    <th mat-header-cell *matHeaderCellDef>מחיר</th>
                    <td mat-cell *matCellDef="let row" [attr.aria-label]="row.product.price + ' שקלים'"> {{ row.product.price }}</td>
                    <td mat-footer-cell *matFooterCellDef>{{ getTotalCost() | currency: 'ILS' }}</td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                <tr class="footer-row" mat-footer-row *matFooterRowDef="displayedColumns"></tr>
            </table>
        } @else {
            <p>אין מוצרים בסל</p>
        }
    </mat-dialog-content>
    <mat-dialog-actions align="end">
        <button mat-button mat-dialog-close>סגור</button>
        <button mat-mini-fab mat-dialog-close>בצע הזמנה</button>
    </mat-dialog-actions>
</section>
